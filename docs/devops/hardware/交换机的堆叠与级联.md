当单一交换机所能够提供的端口数量不足以满足网络计算机的需求时，必须要由2个以上的交换机提供相应数量的端口，这也就要涉及到交换机之间连接的问题。从根本上来讲，交换机之间的连接不外乎两种方式，一是 **堆叠(stack)**，一是 **级联(uplink)**。

![这里写图片描述](https://img-note.langyastudio.com/20210707154729.jpeg?x-oss-process=style/watermark)



## 堆叠

　　交换机的堆叠就是交换机用**堆叠线**通过**堆叠模块**把两台或多台交换机连接起来，每台交换机的母板总线连接在一起，**将它们作为一个交换机使用和治理**，实现高速连接。不同交换机任意二端口之间的延时是相等的，就是一台交换机的延时。堆叠是同级关系，每台交换机的性能是一样的。

　　交换机上的堆叠模块有两个口：一个**进口**（UP向上线），一个**出口**（DOWN向下线），用厂商提供的专用连接电缆（堆叠线），从一台交换机的**UP堆叠端口**直接连接到另一台交换机的**DOWN堆叠端口**。
　　
　　堆叠是把所有堆叠的交换机的**背板带宽共享**。例如一台交换机的背板带宽为2G，那么3台交换机堆叠的话，每台交换机在交换时就有6G的背板带宽。

![这里写图片描述](https://img-note.langyastudio.com/20210707154737.jpeg?x-oss-process=style/watermark)　　



## 级联

　　所谓级联，是指使用**普通的线缆**（双绞线、光纤）将交换机连接在一起，实现相互之间的通讯。级联式结构化网络有利于综合布线，易理解，安装，不用考虑交换机的性能和端口属性，可以方便的实现大量端口的接入。交换机不能无限制级联，超过一定数量的交换机进行级联，最终会引起广播风暴，导致网络性能严重下降。

**级联可分为以下三种：**

- 用普通端口级联
- 用Uplink端口级联
- 光纤端口的级联

![这里写图片描述](https://img-note.langyastudio.com/20210707154743.png?x-oss-process=style/watermark)

![这里写图片描述](https://img-note.langyastudio.com/20210707154748.png?x-oss-process=style/watermark)　　



## 堆叠与级联的区别

　　虽然级联和堆叠都可以实现端口数量的扩充，但是级联后每台集线器或交换机在逻辑上仍是多个被网管的设备，而堆叠后的数台集线器或交换机在逻辑上是一个被网管的设备。

- **对设备要求不同**
级联可通过一根双绞线在任何网络设备厂家的交换机之间，或者交换机与集线器之间完成。而堆叠只有在自己厂家的设备之间，并且该交换机必须具有堆叠功能才可实现。

- **对连接介质要求不同**
级联时只需一根跳线，而堆叠则需要专用的堆叠模块和堆叠线缆，当然堆叠模块是需要另外订购的。

- **最大连接数不同**
交换机间的级联，在理论上没有级联数的限制。但是，叠堆内可容纳的交换机数量，各厂商都会明确地进行限制。

- **管理方式不同**
堆叠后的数台交换机在逻辑上是一个被网管的设备，可以对所有交换机进行统一的配置与管理。而相互级联的交换机在逻辑上是各自独立的，必须依次对其进行配置和管理每台交换机。

- **设备间连接带宽不同**
多台交换机级联时会产生级联瓶颈，并将导致较大的转发延迟。例如，4台百兆位交换机通过跳线级联时，彼此之间的连接带宽也是100Mbps。**当连接至不同交换机上的计算机之间通信时，也只能通过这条百兆位连接，从而成为传输的瓶颈。**同是，随着转发次数的增加，网络延迟也将变得很大。而4台交换机通过堆叠连接在一起时，堆叠线缆将能提供高于1Gbps的背板带宽，从而可以实现所有交换机之间的高速连接。**尽管级联时交换机之间可以借助链路汇聚技术来增加带宽，但是，这是以牺牲可用端口为代价的。**

-  **网络覆盖范围不同**
交换机可以通过级联成倍地扩展网络覆盖范围。例如，以双绞线网络为例，一台交换机所覆盖的网络直径为100m，2台交换机级联所覆盖的网络直径就是300m，而3台交换机级联时的直径就可达400m。而堆叠线缆通常只有0.5~1m，仅仅能够满足交换机之间互联的需要，不会对网络覆盖范围产生影响。